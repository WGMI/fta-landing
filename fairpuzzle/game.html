<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tile Puzzle</title>
<link rel="stylesheet" href="game.css">
</head>
<body>
  <div class="wrap">
    <div class="toolbar">
      <button id="newBtn" title="New Puzzle">🔀 New</button>
      <button id="eyeBtn" title="Show Original">👁️ Guide</button>

      <div class="grid-select">
        <label for="sizeSel">Grid:</label>
        <select id="sizeSel" title="Grid size">
          <option value="3">3×3 (easy)</option>
          <option value="4" selected>4×4</option>
          <option value="5">5×5</option>
          <option value="6">6×6</option>
        </select>
      </div>

      <div class="stats">
        <span id="moves">Moves: 0</span>
        <span id="time">Time: 00:00</span>
        <span id="score">Score: 200</span>
        <a href="../leaderboard.html" class="leaderboard-link">🏆 Leaderboard</a>
      </div>
    </div>

    <div class="board" id="board" aria-label="Tile puzzle board"></div>
    <div class="message" id="msg">🎉 Completed! <span class="credit" id="finalStats" style="display:block;margin-top:6px;"></span></div>
  </div>

  <!-- Eye dialog -->
  <dialog id="guideDlg" aria-label="Original image">
    <div class="dlg-head">
      <h3>Original Image</h3>
      <button id="closeDlg" title="Close">✖</button>
    </div>
    <div class="dlg-body">
      <img id="guideImg" alt="Original puzzle image" />
    </div>
  </dialog>

  <!-- Results dialog -->
  <dialog id="resultsDlg" aria-label="Puzzle completed">
    <div class="dlg-head">
      <h3>🎉 Puzzle Completed!</h3>
      <button id="closeResultsDlg" title="Close">✖</button>
    </div>
    <div class="dlg-body">
      <div class="results-content">
        <div class="completed-image">
          <img id="completedImg" alt="Completed puzzle image" />
        </div>
        <div class="final-stats">
          <div class="stat-item">
            <span class="stat-label">YOUR TIME</span>
            <span class="stat-value" id="finalTime">00:00</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">MOVES</span>
            <span class="stat-value" id="finalMoves">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">SCORE</span>
            <span class="stat-value" id="finalScore">200</span>
          </div>
        </div>
        <div class="facts-section">
          <h4>🎯 Did You Know?</h4>
          <p class="facts-subtitle">Learn about Fairtrade while you play!</p>
          <div class="facts-container" id="factsContainer">
            <!-- Facts will be populated here -->
          </div>
        </div>
        <div class="action-buttons">
          <button id="newGameBtn" class="new-game-btn">🎮 New Game</button>
        </div>
        <div class="confetti-container" id="confettiContainer"></div>
      </div>
    </div>
  </dialog>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../supabase-config.js"></script>
  <script src="game.js"></script>
</body>
</html>
